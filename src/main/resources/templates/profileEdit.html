<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>プロフィール編集</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/editProfile.css}">
</head>
<body>
<div th:replace="fragments/logoutHeader :: logoutHeader"></div>

<main class="container">
    <h1 class="edit-title text-center">自己紹介を編集する</h1>

    <form th:action="@{/profile/update}" method="post" enctype="multipart/form-data" class="mx-auto edit-form">
        <div class="mb-3">
            <label for="profile" class="form-label">自己紹介文</label>
            <textarea id="profile" name="profile" class="form-control" rows="5"
                      placeholder="50文字以上、200文字以下で入力してください"
                      th:text="${user.profile}"></textarea>
        </div>

        <div class="mb-3">
            <label for="avatarFile" class="form-label">アバター画像</label>
            <input type="file" id="avatarFile" name="avatarFile" class="form-control">
            <p class="mt-2" id="fileNameDisplay"></p>
        </div>

        <button type="submit" class="btn btn-primary w-100">自己紹介を確定する</button>
    </form>
</main>

<div th:replace="fragments/footer :: footer"></div>

<script>
  document.getElementById('avatarFile').addEventListener('change', function (e) {
    const fileName = e.target.files[0]?.name || 'ファイルが選択されていません';
    document.getElementById('fileNameDisplay').textContent = fileName;
  });
</script>
</body>
</html>
